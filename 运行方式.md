
# KGQA 项目运行与演示指南

## 一、运行步骤

### 1. 环境准备


# 1. 启动 Neo4j (Docker)
docker run --name neo4j-kgqa -p 7474:7474 -p 7687:7687 \
  -e NEO4J_AUTH=neo4j/neo4j_password \
  neo4j:5

# 2. 安装依赖
cd /mnt/e/python_code/kgqa
pip install -r requirements.txt


### 2. 运行数据管道

Bash

```
python run_pipeline.py
```

### 3. 启动服务

Bash

```
# 终端1: API服务
python app/main.py

# 终端2: Streamlit UI
streamlit run ui/streamlit_app.py
```

**访问:**

- API文档: http://localhost:8000/docs
- UI界面: http://localhost:8501

------

## 二、推荐数据集

**开源中文医疗数据集**

| **数据集**     | **链接**                                                 | **说明**                       |
| -------------- | -------------------------------------------------------- | ------------------------------ |
| **CMeKG**      | [GitHub Link](https://github.com/king-yyf/CMeKG)         | 中文医学知识图谱，100万+三元组 |
| **CHIP-CDN**   | [Tianchi Link](https://tianchi.aliyun.com/dataset/85768) | 临床诊断规范化数据             |
| **cMedQA2**    | [GitHub Link](https://github.com/zhangsheng93/cMedQA2)   | 中文医学问答数据集             |
| **天池医疗KG** | [Tianchi Link](https://tianchi.aliyun.com/dataset/90055) | 医疗实体关系抽取数据           |

将数据转换为项目需要的 JSONL 格式:

JSON

```json
{"head": "糖尿病", "relation": "HAS_SYMPTOM", "tail": "多饮", "source": "CMeKG", "confidence": 0.95}
```

**支持的关系类型:** `HAS_SYMPTOM`, `RECOMMENDED_DRUG`, `NEEDS_EXAM`, `HAS_INDICATOR`, `TREATS`, `CONTRAINDICATED_FOR`

------

## 三、验收演示方案

**演示流程 (建议15-20分钟)**

### Part 1: 系统架构 (3分钟)

- 展示项目结构图
- 说明8个核心功能模块

### Part 2: 数据处理演示 (4分钟)

Bash

```
# 展示原始数据
python -c "from itertools import islice; print(''.join(islice(open('data/triples_raw/sample_triples.jsonl','r',encoding='utf-8'),5)))"


# 运行融合管道
python run_pipeline.py

# 展示融合结果
python -c "from itertools import islice; print(''.join(islice(open('data/triples_fused/fused_triples.jsonl','r',encoding='utf-8'),5)))"

```

### Part 3: 问答系统演示 (5分钟)

在 Streamlit UI 中演示:

1. **输入:** "糖尿病有哪些症状？" → 展示答案+知识图谱可视化
2. **输入:** "高血压吃什么药？" → 展示药物推荐
3. **输入:** "头痛可能是什么病？" → 展示反向推理

### Part 4: 自动评测演示 (3分钟)

Bash

```
python run_eval.py
cat reports/latest_report.md
```

展示评测指标: Precision, Recall, F1

### Part 5: 高级功能演示 (3分钟)

- NER实体抽取 (nlp/ner)
- 推理引擎规则 (reasoning)
- 版本管理与回滚 (管理Tab)

## 四、演示准备清单

- Neo4j数据库已启动并导入数据
- API服务和Streamlit UI正常运行
- 准备3-5个典型问答示例
- 准备一份简短PPT介绍系统架构
- 确保网络环境支持加载预训练模型(或提前下载)

------

## 五、常见问题

1. **Neo4j连接失败:** 检查 `config.yaml` 中的连接配置
2. **模型加载慢:** 首次运行会下载 `bert-base-chinese`，可提前下载
3. **端口冲突:** 修改 `config.yaml` 中的 `api.port`



